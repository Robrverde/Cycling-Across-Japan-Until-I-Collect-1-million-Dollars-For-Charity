[gd_scene load_steps=10 format=3 uid="uid://cwfkvtjqkt2ua"]

[ext_resource type="Script" path="res://Player/player.gd" id="1_w17lm"]
[ext_resource type="Texture2D" uid="uid://b31rpvvn70573" path="res://Sprites/Player/monkey_sprite_idle/monkey_sprite_frame_DOS.png" id="2_70xuk"]
[ext_resource type="Script" path="res://BG.gd" id="4_478lo"]
[ext_resource type="PackedScene" uid="uid://bwev667u1cx0y" path="res://BG.tscn" id="4_qlun8"]
[ext_resource type="Texture2D" uid="uid://c6th8tvms5tmu" path="res://Sprites/Power Ups/pete_icon.png" id="5_gjdgw"]
[ext_resource type="Texture2D" uid="uid://b6j01bpjquwhu" path="res://Sprites/Background/bg1m.png" id="5_sj2jj"]

[sub_resource type="GDScript" id="GDScript_vemv7"]
script/source = "extends Node

const monkeyStartPos = Vector2i(800,292)
const camStartPos = Vector2i(800,200)

var speedMonkey : float

func _ready():
	new_game()

func new_game():
	#$monkey.position =  monkeyStartPos
	$monkey.velocity = Vector2i(0,0)
	
	#Default initial speed
	speedMonkey = 200.0
	#$Camera2D.position = camStartPos
	#$Walls.position =  monkeyStartPos
	
	
	
func _process(delta):
	
	#Player is constantly slowing down.
	speedMonkey -= 0.1
	
	#print(\"Speed\")
	#print(speedMonkey)
	
	#if speedMonkey <= 0:
		#speedMonkey = 0
		#$BG.scroll_base_offset = Vector2(0,0)
	if speedMonkey <= 0:
		$monkey.position.x += 0
		$BG.scroll_base_offset = Vector2(0,0)
	else:
		$monkey.position.x += speedMonkey * delta
		
	#print(\"pos X\")
	#print($monkey.position.x)
	#$Camera2D.position.x += speed
	#$Walls.position.x +=speed
"

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_7ebrd"]
radius = 5.4
height = 13.2

[sub_resource type="SpriteFrames" id="SpriteFrames_sy648"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_70xuk")
}],
"loop": true,
"name": &"Idle",
"speed": 5.0
}]

[node name="gameScene" type="Node2D"]
script = SubResource("GDScript_vemv7")

[node name="monkey" type="CharacterBody2D" parent="."]
position = Vector2(296, 458)
script = ExtResource("1_w17lm")

[node name="CollisionShape2D" type="CollisionShape2D" parent="monkey"]
scale = Vector2(5, 5)
shape = SubResource("CapsuleShape2D_7ebrd")

[node name="Area2D" type="Area2D" parent="monkey"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="monkey/Area2D"]
scale = Vector2(5, 5)
shape = SubResource("CapsuleShape2D_7ebrd")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="monkey"]
position = Vector2(11, 4)
scale = Vector2(0.14, 0.08)
sprite_frames = SubResource("SpriteFrames_sy648")
animation = &"Idle"

[node name="Camera2D" type="Camera2D" parent="monkey"]
limit_top = 0
limit_bottom = 0

[node name="BG" type="ParallaxBackground" parent="."]
script = ExtResource("4_478lo")

[node name="Sky" type="ParallaxLayer" parent="BG"]
position = Vector2(-281, 0)
motion_mirroring = Vector2(1150, 0)

[node name="Bg1m" type="Sprite2D" parent="BG/Sky"]
position = Vector2(577, 326)
scale = Vector2(0.9, 0.898611)
texture = ExtResource("5_sj2jj")

[node name="BG2" parent="." instance=ExtResource("4_qlun8")]

[node name="petePower" type="Area2D" parent="." groups=["petePower"]]
position = Vector2(609, 511)

[node name="Sprite2D" type="Sprite2D" parent="petePower"]
position = Vector2(326, -94)
scale = Vector2(0.316406, 0.323242)
texture = ExtResource("5_gjdgw")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="petePower"]
position = Vector2(326, -94)
scale = Vector2(0.316406, 0.323242)
polygon = PackedVector2Array(-94, -350.8, -94, -349.4, -71, -340.4, -71, -339, -41, -317, -41, -315.8, -5.60001, -279.4, 31.1, -318, 33.3, -318, 61.3, -341, 63.5, -341, 75.5, -348, 78.7, -348, 94.7, -353, 108.2, -353, 124, -349.6, 124, -348.3, 148, -338.3, 148, -337.1, 166, -326.1, 166, -325, 305, -213, 305, -211.8, 307.4, -209.5, 306.3, -207, 300, -166.7, 300, -125, 300.7, -125, 307.8, -74, 308.4, -74, 324.4, -31, 325.1, -31, 376, 47.4, 376, 49.5, 389, 72.5, 389, 75.7, 399, 106.7, 399, 115, 400, 146, 398.9, 146, 397.9, 159, 396.5, 159, 389.5, 184, 388.1, 184, 372.1, 211, 370.9, 211, 334.8, 244, 332.6, 244, 305.6, 261, 303.3, 261, 289, 267.3, 289, 268.7, 273, 290, 271.8, 290, 240.8, 320, 238.5, 320, 218.6, 332, 215.4, 332, 187.2, 338, 184.8, 338, 155, 332.7, 155, 331.4, 138, 324.9, 138, 337, 133, 337, 90.2, 359.2, 93, 367.7, 93, 371.8, 89.8, 375, 86.7, 375, 81.9, 363.4, 42.3, 377, 38.4, 377, 9.20001, 383, -26.2, 383, -49, 378.7, -49, 377.5, -71, 370.5, -71, 369.1, -98, 354.2, -98, 352.9, -118, 335.9, -118, 333.7, -132.8, 314.3, -152.4, 327, -155.6, 327, -178.6, 336, -183.7, 336, -200, 338.3, -200, 336.8, -222, 334.8, -222, 333.4, -245, 324.4, -245, 323.1, -262, 312.1, -262, 310.8, -285, 288.9, -285, 286.7, -299, 268, -301.5, 268, -336, 250.2, -336, 249.1, -364, 230.1, -364, 228.8, -384, 209.9, -384, 207.7, -401, 182.6, -401, 179.3, -410, 151.3, -410, 144, -411, 113, -409.8, 113, -407.8, 95, -406.5, 95, -399.5, 71, -398.3, 71, -386.3, 46, -385.1, 46, -336, -29.7, -336, -31.4, -319, -72.3, -319, -76.2, -311, -123.3, -311, -167, -318.4, -212, -315.7, -212, -168.7, -332, -166.5, -332, -141.6, -347, -138.1, -347, -121, -351.5, -121, -353.2)

[connection signal="area_entered" from="monkey/Area2D" to="monkey" method="_on_area_2d_area_entered"]
